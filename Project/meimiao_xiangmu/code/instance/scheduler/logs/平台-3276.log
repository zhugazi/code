[2016-12-05 19:29:18.280] [DEBUG] 平台 - 处理器实例化...
[2016-12-05 19:29:18.288] [DEBUG] 平台 - 控制器实例化...
[2016-12-05 19:29:18.292] [DEBUG] 平台 - server实例化
[2016-12-05 19:29:18.300] [DEBUG] 平台 - Server running at 2016 port
[2016-12-05 19:29:20.998] [DEBUG] 平台 - { statusCode: 200,
  headers: '{"server":"nginx/1.6.1","date":"Mon, 05 Dec 2016 11:28:34 GMT","content-type":"text/html","transfer-encoding":"chunked","connection":"close","vary":"Accept-Encoding","cache-control":"no-cache, must-revalidate","expires":"Sat, 26 Jul 1997 05:00:00 GMT","pragma":"no-cache, no-cache","dpool_header":"tinker26","sina-lb":"aGEuMTcxLmczLnlmLmxiLnNpbmFub2RlLmNvbQ==","sina-ts":"ZWJkYTk2Y2UgMCAwIDAgMyA3Cg=="}',
  body: '<!DOCTYPE html>\n<html>\n<head>\n    <meta http-equiv="Content-type" content="text/html; charset=gb2312"/>\n    <title>Sina Visitor System</title>\n</head>\n<body>\n<span id="message"></span>\n<script type="text/javascript" src="/js/visitor/mini_original.js?v=20161116"></script>\n<script type="text/javascript">\n    window.use_fp = "1" == "1"; // �Ƿ��ɼ��豸ָ�ơ�\n    var url = url || {};\n    (function () {\n        this.l = function (u, c) {\n            try {\n                var s = document.createElement("script");\n                s.type = "text/javascript";\n                s[document.all ? "onreadystatechange" : "onload"] = function () {\n\n                    if (document.all && this.readyState != "loaded" && this.readyState != "complete") {\n                        return\n                    }\n                    this[document.all ? "onreadystatechange" : "onload"] = null;\n                    this.parentNode.removeChild(this);\n                    if (c) {\n                        c()\n                    }\n                };\n                s.src = u;\n                document.getElementsByTagName("head")[0].appendChild(s)\n            } catch (e) {\n            }\n        };\n    }).call(url);\n\n    // �������ڡ�\n    wload(function () {\n\n        try {\n\n            var need_restore = "1" == "1"; // �Ƿ��߻ָ��������̡�\n\n            // ������Ҫ�߻ָ��������̣����Դ� cookie ��ȡ�û����ݡ�\n            if (!need_restore || !Store.CookieHelper.get("SRF")) {\n\n                // ����ȡʧ���ߴ����ÿ����̡�\n                // ����ִ��ʱ������������ 3s��������Ϊ������\n                var error_timeout = window.setTimeout("error_back()", 3000);\n\n                tid.get(function (tid, where, confidence) {\n                    // ȡָ��˳�����ɣ��������� timeout ��\n                    window.clearTimeout(error_timeout);\n                    incarnate(tid, where, confidence);\n                });\n            } else {\n                // �û����ݴ��ڣ����Իָ��û����ݡ�\n                restore();\n            }\n        } catch (e) {\n            // ������\n            error_back();\n        }\n    });\n\n    // �����ء� �ص�������\n    var return_back = function (response) {\n\n        if (response["retcode"] == 20000000) {\n            back();\n        } else {\n            // ������\n            error_back(response["msg"]);\n        }\n    };\n\n    // ��ת�س�ʼ��ַ��\n    var back = function() {\n\n        var url = "http://weibo.com/tv/v/EkvL22RIY?from=vfun";\n        if (url != "none") {\n            window.location.href = url;\n        }\n    };\n\n    // �����㲥��\n    var cross_domain = function (response) {\n\n        var from = "weibo";\n        if (response["retcode"] == 20000000) {\n\n            var crossdomain_host = "login.sina.com.cn";\n            if (crossdomain_host != "none") {\n\n                var cross_domain_intr = window.location.protocol + "//" + crossdomain_host + "/visitor/visitor?a=crossdomain&cb=return_back&s=" +\n                        encodeURIComponent(response["data"]["sub"]) + "&sp=" + encodeURIComponent(response["data"]["subp"]) + "&from=" + from + "&_rand=" + Math.random();\n                url.l(cross_domain_intr);\n            } else {\n\n                back();\n            }\n        } else {\n\n            // ������\n            error_back(response["msg"]);\n        }\n    };\n\n    // Ϊ�û������ÿ����� ��\n    var incarnate = function (tid, where, conficence) {\n\n        var gen_conf = "";\n        var from = "weibo";\n        var incarnate_intr = window.location.protocol + "//" + window.location.host + "/visitor/visitor?a=incarnate&t=" +\n                encodeURIComponent(tid) + "&w=" + encodeURIComponent(where) + "&c=" + encodeURIComponent(conficence) +\n                "&gc=" + encodeURIComponent(gen_conf) + "&cb=cross_domain&from=" + from + "&_rand=" + Math.random();\n        url.l(incarnate_intr);\n    };\n\n    // �ָ��û���ʧ�����ݡ�\n    var restore = function () {\n\n        var from = "weibo";\n        var restore_intr = window.location.protocol + "//" + window.location.host +\n                "/visitor/visitor?a=restore&cb=restore_back&from=" + from + "&_rand=" + Math.random();\n\n        url.l(restore_intr);\n    };\n\n    // �����ָ���ʧ�����ݡ�\n    var restore_back = function (response) {\n\n        // ���ݻָ��ɹ��߹㲥���̣������ߴ����ÿ����̡�\n        if (response["retcode"] == 20000000) {\n\n            var url = "http://weibo.com/tv/v/EkvL22RIY?from=vfun";\n            var alt = response["data"]["alt"];\n            var savestate = response["data"]["savestate"];\n            if (alt != "") {\n            \trequrl = (url == "none") ? "" : "&url=" + encodeURIComponent(url);\n                var params = "entry=sso&alt=" + encodeURIComponent(alt) + "&returntype=META" +\n                        "&gateway=1&savestate=" + encodeURIComponent(savestate) + requrl;\n                window.location.href = "http://login.sina.com.cn/sso/login.php?" + params;\n            } else {\n\n                cross_domain(response);\n            }\n        } else {\n\n            tid.get(function (tid, where, confidence) {\n                incarnate(tid, where, confidence);\n            });\n        }\n    };\n\n    // �����������ص�¼ҳ��\n    var error_back = function (msg) {\n\n        var url = "http://weibo.com/tv/v/EkvL22RIY?from=vfun";\n        var clientType = "pc";\n        if (url != "none") {\n\n            if (url.indexOf("ssovie4c55=0") === -1) {\n                url += (((url.indexOf("?") === -1) ? "?" : "&") + "ssovie4c55=0");\n            }\n            if (clientType == "mobile") {\n            \twindow.location.href = "https://passport.weibo.cn/signin/login?r="+url;\n            } else{\n            \twindow.location.href = "http://weibo.com/login.php";\n            }\n        } else {\n\n            if(document.getElementById("message")) {\n                document.getElementById("message").innerHTML = "Error occurred" + (msg ? (": " + msg) : ".");\n            }\n        }\n    }\n\n</script>\n</body>\n</html>' }
